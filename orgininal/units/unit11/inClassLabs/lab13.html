<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>In-class Lab 13</title>
<link href="basic.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" language="JavaScript">
<!--

function putSemester() {

    var today=new Date();

    var thisMonth=today.getMonth()+1;

    var thisYear=today.getFullYear();

    if(thisMonth <=6) {

        return "Spring, " + thisYear;

    }

    else {

       return "Fall, " + thisYear;

    }

}//-->

  </script>

  <style type="text/css">

<!--

    .bgStripes {

        background-image:url(../../../images/Xstripes.gif);

        background-attachment: fixed;

    }

    body {

        background-color:white;

    }

    strong {

        font-family: Arial, Helvetica, sans-serif;

    }

-->
</style>
</head>
<body style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<table class="bgStripes" border="0" width="100%">
<tbody>
<tr name="firstRow">
<td valign="top" width="80"><span style="font-size: x-small; font-weight: bold;">
<script type="text/javascript">
<!--

            document.write(putSemester());

            -->
</script>
</span> <br />
</td>
<td style="text-align: center;"><span style="color: darkblue; font-size: medium; font-weight: bold;">
PHP Web Development with MySQL</span>
</td>
<td align="right" valign="top" width="80"><span style="font-size: x-small; font-weight: bold;">
3 Credits</span>
</td>
</tr>
<tr>
<td colspan="3" style="text-align: center;"><span style="font-size: xx-small; font-weight: bold;">
152-166</span>
</td>
</tr>
</tbody>
</table>
<h2>In-class Lab 13 - Authentication<br />
</h2>
<ol type="I">
<li class="row0">
<p>Exercise 1</p>
<ol type="1">
<li class="row1">
<p>
Sign on to the MySQL server by executing the following (with your username)
in a terminal window: </p>
<blockquote><code>
ssh astudent@198.150.221.252<br />
</code></blockquote>
</li>
<li class="row1">
<p>
Run the MySQL interpreter by executing the following (with your username): </p>
<blockquote><code>
mysql -u astudent -p <br />
</code></blockquote>
</li>
<li class="row1">
<p>Set the database to your private one: </p>
<blockquote><code>
use astudent;<br />
</code></blockquote>
</li>
<li class="row0">
<p>
Create the <b>authorized_users</b> table using this statement:</p>
<blockquote><code>
create table authorized_users (<br />
&nbsp;&nbsp;name varchar(20), <br />
&nbsp;&nbsp;password varchar(40),<br />
&nbsp;&nbsp;primary key (name)<br />
) type=MyISAM;<br />
</code></blockquote>
</li>
<li class="row0">
<p>Alternatively you may use <span style="font-weight: bold;">phpMyAdmin</span>
to create the table if you prefer.</p>
</li>
<li class="row0">
<p>Add two records to the table you created:</p>
<blockquote><code>
insert into authorized_users (name, password)<br />
&nbsp;&nbsp;values ('username', 'password');<br />
<br />
insert into authorized_users (name, password)<br />
&nbsp;&nbsp;values ('testuser', sha1('password') );<br />
</code></blockquote>
</li>
<li class="row0">
<p>Then download either the file <a href="secretdb.php.txt">secretdb.php</a>
or the file <a href="lab13.zip">lab13.zip</a> to a directory under:</p>
<blockquote><code>
/var/www/labs<br />
</code></blockquote>
</li>
<li class="row0">
<p>The zip file contains the <b>secretdb.php</b> file.
If you downloaded <b>lab13.zip</b>, unzip it using: <code>unzip</code></p>
</li>
<li class="row0">
<p>If you have problems consult your instructor.</p>
</li>
</ol>
</li>
<li class="row1">
<p>Exercise 2</p>
<ol type="1">
<li class="row1">
<p>
Create the file <b>lab13db.inc.php</b>
which defines variables containing your username, password and database name.
</p>
</li>
<li class="row1">
<p>Modify the file <b>secretdb.php</b> to use the new include file instead
of hard-coding user information in calls to the mysqli functions.</p>
</li>
<li class="row1">
<p>Use the PHP code provided in the <b>secretdb.php</b>
file and your new table to validate users.</p>
</li>
<li class="row1">
<p>Modify the code in <b>secretdb.php</b> so that it tests the password
entered by the user against an encrypted password in your
<b>authorized_users</b> table.</p>
</li>
<li class="row1">
<p>Use the MySQL <b>sha1()</b> function to encrypt the password.</p>
</li>
<li class="row1">
<p>Save your modified PHP code as <b>lab13.php</b> .</p>
</li>
<li class="row1">
<p>After you get the authentication script working, submit
<b>lab13.php</b> and <b>lab14db.inc.php</b> via Blackboard.</p>
</li>
<li class="row1">
<p>Also, show your working code to your instructor if there is time.</p>
</li>
<br />
</ol>
</li>
</ol>
</body>
</html>
