h2. Introduction to the MySQL DBMS

<hr />

h3. About Databases

* Whether you are running a bank, a hospital, a gas station, or a Web store, good record keeping and organized data are crucial to the success of any business.
* One way to store data might be in a text file, but as the amount of data increases, a database might be a better choice for storing and managing your data.
* Different types of databases determine what kind of structure will be used to store and retrieve the data. The most basic type uses a flat file structure, storing the data in a big table, but this type is difficult to modify and really best suited for simple applications.
* Another type of database is one in which the data is organized in a hierarchy or network, much like the structure of a directory tree, a parent–child model, but these kinds of databases are hard for end users to grasp.
* Then in the 1980s relational databases became the "in" thing because the relational model made data manipulation easier and faster for the end user and easier to maintain by the administrator.
* At the core of this model is the concept of a table (also called a relation) in which all data is stored. Each table is made up of records consisting of horizontal rows and vertical columns or fields, like a two-dimensional array.
* Unlike the hierarchical model, the relational model made it easy for the user to retrieve, insert, update, and delete data without having to understand the underlying structure of the data in the database.
* Due to the popularity of relational databases, known as relational database management systems (RDBMS), a number of relational databases are used today, among them, Oracle, Sybase, PostgreSQL Informix, DB2, SQL Server, and MySQL.
* MySQL is the most commonly used database program for developing database-driven Web sites with PHP.
* MySQL is an open source database that runs on a majority of operating systems, such as UNIX, Linux, Macintosh, and Windows. Although maintained by MySQL AB, a commercial company, MySQL comes with a GPL (GNU Public License) open source license as well as a commercial license.
* PHP and MySQL fit very well together. They are both reasonably easy to use, fairly scalable and reliable and have a good set of features for small- and medium-sized Web applications.
* Although PHP can be used with any database through its set of ODBC functions, it comes loaded with MySQL specific functions. This set of specific functions makes for a tight integration between the PHP language and the MySQL database.

h3. Client/Server Databases

* If your Web site is to be up and available to customers around the world, and you are using a database management system to manage the data, the type of relational database best suited for the task is a client/server database, where the database server runs around the clock to handle client requests as they come in, no matter what the time zone.
* Today MySQL is one of the most popular client/server database systems in the open source community for serving Web pages.
* The model for a client/server architecture is as follows. The user requests a page from the browser (e.g., Internet Explorer, Netscape, Firefox), and an HTTP connection is made to the Web server (Apache, ISS) where the request is received and handled.
* If the action is to start up a PHP program, the Web server starts up the PHP interpreter and PHP starts processing the script. If the PHP script contains an instruction to connect to a database, in this case MySQL, then once the connection is made and a database selected, the PHP program has access to the database through the MySQL server.
* The MySQL server receives requests, called queries, from the PHP program and sends back information collected from the database. Once PHP gets the information from the MySQL server, it can then format it into nice tables using HTML tags, and send it back to the Web server where it is then relayed to the browser where the whole process started.

h3. Talking to the Database

* To communicate with the MySQL server, you will need a language, and SQL (Structured Query Language) is the language of choice for most modern multiuser, relational databases.
* SQL provides the syntax and language constructs needed to talk to relational databases in a standardized, cross-platform structured way.
* Like the English language with a variety of dialects (British, American, Australian, etc.), there are many different versions of the SQL language.
* The version of SQL used by MySQL follows the ANSI (American National Standards Institute) standard, meaning that it must support the major keywords (e.g. SELECT, UPDATE, DELETE, INSERT, WHERE) as defined in the standard.
* As you can see by the names of these keywords, SQL is the language that makes it possible to manipulate the data in a database.
* MySQL Strengths and Weaknesses
* The MySQL&reg; database has become the world's most popular open source database because of its consistent fast performance, high reliability, and ease of use.
* It's used in more than 8 million installations ranging from large corporations to specialized embedded applications on every continent in the world. (Yes, even Antarctica!)
* Not only is MySQL the world's most popular open source database, it's also become the database of choice for a new generation of applications built on the LAMP stack (Linux, Apache, MySQL, PHP/Perl/Python).
* MySQL runs on more than 20 platforms including Linux, Windows, OS/X, HP-UX, AIX, Netware, giving you the kind of flexibility that puts you in control.
* Having said that, like any tool, MySQL is right for certain types of applications and not as suitable for others. Let's look at what the strengths and weaknesses of MySQL are.

h3. Easy to Use

* MySQL is a relatively easy to use and administer database system. Large database systems with all the bells and whistles often require a knowledgable database administrator (DBA) to set up and administer it.
* MySQL is a database built for programmers with very little overhead in terms of maintenance.

h3. Large Community of Developers

* What makes MySQL so appealing is the large community of other developers who are building applications around it. This makes it a relatively safe choice.
* If you ever need anything, chances are that someone already experienced that issue and has it resolved. You can often find the solutions with a little searching online.

h3. Open Source License

* MySQL is free to use as long as you do not bundle it with your commercial product. As an application provider, you can always tell your customers to download and set up their own MySQL database to which your application will connect.
* This is a fairly easy procedure and there is no license cost involved, making it an attractive choice for application developers.

h3. Commercial License

* When in fact you want to ship your application with a copy of the MySQL database server built into it, then you must purchase the license from MySQL AB.
* This might not be an attractive feature for true believers in open source and General Public License models, but for most of us, obtaining a license will not be an issue.
* For Web applications, the database is rarely shipped as part of the application. Because customers who install server-side applications usually have sufficient skills to perform the tasks of downloading and setting up databases, it is sufficient to document the setup process with your application and leave the rest to them.

h3. Scalability

* Scalability refers to how well an application can support larger or smaller volumes of data and more or fewer users without degrading performance and costing more.
* MySQL used to be regarded as a small database for small systems. Over time, MySQL has become a serious RDBMS with its own way of managing scalability, claiming that it can handle from small (a megabyte) to large (several terabytes) volumes of data with ultimate scalability.
* For example, there are currently some very large sites in production with multiclusters of MySQL database servers. Scalability is beyond the scope of this book but it is good to know that MySQL can handle your application as it grows in size.

h3. The Anatomy of a Relational Database

* What makes up a database? The main components of an RDBMS are:
** The database server
** The database
** Tables
** Records and fields
** Primary key
** Schema
* We discuss each of these concepts in the next sections of this unit.

h3. The Database Server

* The database server is the actual server process running the databases. It controls the storage of the data, grants access to users, updates and deletes records, and communicates with other servers.
* The database server is normally on a dedicated host computer, serving and managing multiple clients over a network, but can also be used as a standalone server on the local host machine to serve a single client.
* For example, you might bethe single client using MySQL on your local machine, often referred to as "localhost" without any network connection at all. This is probably the best way to learn how to use MySQL.
* If you are using MySQL, the server process is the MySQL service on Windows or the mysqld process on Linux/UNIX operating systems.
* The database server typically follows the client/server model where the front end is the client, a user sitting at his or her workstation making database requests and waiting for results, and the back end is the database server that grants access to users, stores and manipulates the data, performs backups, even talks to other servers.
* The requests to the database server can also be made from a program that acts on behalf of a user making requests from a Web page.
* In the following units, you will learn how to make requests from the MySQL command line first, and then to connect to the database server from a PHP program using PHP built-in functions to make requests to the MySQL database server.

h3. The Database

* A database is a collection of related data elements, usually corresponding to a specific application. A company might have one database for all its human resource needs, perhaps another one for its sales staff, a third one for e-commerce applications, and so on. Below are listed the MySQL databases or schemas installed on a particular instance of the MySQL server. The databases are listed as "mysql", "northwind", "phpmyadmin", and "test".
* Figure: Databases in an Instance of MySQL
<br /><pre>
+------------+
| Database   |
+------------+
| mysql      |
| northwind  |
| phpmyadmin |
| test       |
+------------+
</pre>

h3. Tables

* Each database consists of two-dimensional tables. In fact, a relational database stores all of its data in tables, and nothing more.
* All operations are performed on the table, which can then produce other tables, and so on.
* One of the first decisions you will make when designing a database is what tables it will contain. A typical database for an organization might consist of tables for customers, orders, and products.
* All these tables are related to one another in some way. For example, customers have orders, and orders have items. Although each table exists on its own, collectively the tables comprise a database or schema.
* The figure below lists the tables in the database called Northwind, a fictional database provided by Microsoft to serve as a model for learning how to manipulate a database.
* The Northwind Traders sample database typically comes as a free sample with Microsoft Access, but is available for MySQL at: http://www.flash-remoting.com/examples/
* Figure: Tables in the northwind database.
<br /><pre>
+----------------------+
| Tables_in_northwind  |
+----------------------+
| Categories           |
| CustomerCustomerDemo |
| CustomerDemographics |
| Customers            |
| EmployeeTerritories  |
| Employees            |
| Order_Details        |
| Orders               |
| Products             |
| Region               |
| Shippers             |
| Suppliers            |
| Territories          |
| USStates             |
+----------------------+
</pre>

h3. Rows and Columns (Records and Fields)

* A table has a name and consists of a set of rows and columns. It resembles a spreadsheet where each row, also called a record, is comprised of vertical columns, also called fields.
* All rows from the same table have the same set of columns. The "shippers" table from the Northwind database has three columns and three rows, as shown in the figure.
* Figure: The rows (records) and columns (fields) from the "shippers" table in the Northwind database.
<br /><pre>
+-----------+------------------+----------------+
| ShipperID | CompanyName      | Phone          |
+-----------+------------------+----------------+
|         1 | Speedy Express   | (503) 555-9831 |
|         2 | United Package   | (503) 555-3199 |
|         3 | Federal Shipping | (503) 555-9931 |
+-----------+------------------+----------------+
</pre>
* There are two basic operations you can perform on a relational table. You can retrieve a subset of its columns and you can retrieve a subset of its rows. The following figures are samples of the two operations.
* Figure: Retrieving a subset of columns.
<br /><pre>
mysql> select companyname from shippers;
+------------------+
| companyname      |
+------------------+
| Speedy Express   |
| United Package   |
| Federal Shipping |
+------------------+
</pre>
* Figure: Retrieving a subset of rows.
<br /><pre>
mysql> select * from shippers
   -> where companyname = 'Federal Shipping';
+-----------+------------------+----------------+
| ShipperID | CompanyName      | Phone          |
+-----------+------------------+----------------+
|         3 | Federal Shipping | (503) 555-9931 |
+-----------+------------------+----------------+
</pre>
* Remember, a relational database manipulates only tables and the result of all operations are also tables.
* The tables are sets, which are themselves sets of rows and columns. You can view the database itself as a set of tables.
* You can also perform a number of other operations between two tables, treating them as sets.
* You can join information from two tables, make cartesian products of the tables, get the intersection between two tables, add one table to another, and so on.
* Later we will discuss how to perform operations on tables using the SQL language. SQL allows you to "talk" to a database. The two figures above use SQL commands to retrieve data.

h3. Columns/Fields

* When discussing tables, we must talk about columns because they are an integral part of the table. Columns are also known as fields or attributes.
* Fields describe the data. Each field has a name. For example, the "shippers" table has fields named "ShipperID," "CompanyName," and "Phone".
* The field or column also describes the type of data it contains. A data type can be a number, a character, a date, a time stamp, and so on.
* In the following figure "ShipperID" is the name of a field and the data type is integer. The shipper's ID will not exceed 11 digits in length.
* There are many data types and sometimes they are specific to a particular vendor's database management system. For example, MySQL might have different data types available than Oracle.
* Figure: Each field has a name and a description of the data that can be stored there.
<br /><pre>
+-------------+-------------+------+-----+---------+----------------+
| Field       | Type        | Null | Key | Default | Extra          |
+-------------+-------------+------+-----+---------+----------------+
| ShipperID   | int(11)     | NO   | PRI | NULL    | auto_increment |
| CompanyName | varchar(40) | NO   |     |         |                |
| Phone       | varchar(24) | YES  |     | NULL    |                |
+-------------+-------------+------+-----+---------+----------------+
</pre>

h3. Rows/Records

* A record is a row in the table. It could be a product in the product table, an employee record in the employee table, and so on. Each table in a database contains zero or more records. The following query shows us that there are four records in the "region" table.
<br /><pre>
mysql> select * from region;
+----------+-------------------+
| RegionID | RegionDescription |
+----------+-------------------+
|        1 | Eastern           |
|        2 | Western           |
|        3 | Northern          |
|        4 | Southern          |
+----------+-------------------+
4 rows in set (0.00 sec)
</pre>

h3. Primary Key and Indexes

* A primary key is a unique identifier for each record. For example, every employee in the United States has a Social Security number, every driver has a driver's license, and every car has a license plate.
* These identifiers are unique. In the world of database tables, we call the unique identifier a primary key. Although it is a good idea to have a primary key, not every table has one.
* The primary key is determined when the table is created and is more in keeping with a discussion on database design. In the query below, the "CategoryID" is the primary key for the "categories" table in the Northwest database.
* It is a unique ID that consists of a number that will automatically be incremented every time a new category (record) is added to the list of categories.
<br /><pre>
mysql> describe categories;
+--------------+-------------+------+-----+---------+----------------+
| Field        | Type        | Null | Key | Default | Extra          |
+--------------+-------------+------+-----+---------+----------------+
| CategoryID   | int(11)     | NO   | PRI | NULL    | auto_increment |
| CategoryName | varchar(15) | NO   | MUL |         |                |
| Description  | longtext    | YES  |     | NULL    |                |
| Picture      | longblob    | YES  |     | NULL    |                |
+--------------+-------------+------+-----+---------+----------------+
</pre>
* In addition to a primary key, one or more indexes are often used to enhance performance for finding rows in tables that are frequently accessed.
* Indexes are like the indexes in the back of a book that help you find a specific topic more quickly than searching through the entire book.
* When searching for a particular record in a table, MySQL must load all the records before it can execute the query. An index, like the index of a book, is a reference to a particular record in a table.

h3. The Database Schema

* Designing a very small database is not difficult, but designing one for a large Web-based application can be daunting.
* Database design is both an art and a science and requires understanding how the relational model is implemented, a topic beyond the scope of this book.
* When discussing the design of the database, you will encounter the term "database schema", which refers to the structure of the database. It describes the design of the database similar to a template or blueprint.
* It describes all the tables, and their layout, but does not contain the actual data in the database. In MySQL, we use the "show tables" command to list all the tables in a particular schema. Note that MySQL uses the term database to refer to what other database vendors may call a schema.
<br /><pre>
mysql> show tables;
+----------------------+
| Tables_in_northwind  |
+----------------------+
| Categories           |
| CustomerCustomerDemo |
| CustomerDemographics |
| Customers            |
| EmployeeTerritories  |
| Employees            |
| Order_Details        |
| Orders               |
| Products             |
| Region               |
| Shippers             |
| Suppliers            |
| Territories          |
| USStates             |
+----------------------+
14 rows in set (0.00 sec)
</pre>
* You could then use the "describe" command with each table name (as was done with the "categories" table above) to view the structure of each of the tables in the Northwind schema or database.

h3. Connecting to the Database

* Here we assume you have installed a database server and it is running. Downloading and installing MySQL is usually a straightforward process. Appendix E of the textbook discusses installation of the MySQL database system (DBMS).
* The MySQL DBMS uses the client/server model. There are a number of client applications available to connect to the database server, the most popular and most widely available being the mysql command-line client shown below.
<br /><pre>
$ mysql
Welcome to the MySQL monitor. Commands end with ; or \g.
Your MySQL connection id is 3 to server version: 4.1.8-nt-log

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql>
</pre>
* Regardless of the type of client you choose, you will always need to specify the username, and the host you are connecting to (unless it is "localhost").
* Most configurations expect you to have a password, although MySQL accounts may be configured to not require one. You have the option to specify a database to use as well.

h3. MySQL Command-Line Options

* The mysql command-line client ships with the MySQL installation and is universally available. It is the mysql (UNIX/Linux) or mysql.exe (Windows) program located in the bin folder of your MySQL installation.
* To run this command-line application, you must open a terminal window or command-line prompt.
** In Windows, you may go to the Start menu and choose the Run option, then type "cmd" in the Run window.
** In Mac OS X, you may go to the Applications folder in your Finder and then navigate to Utilities. You will find the Terminal application there. You should navigate to the location where you installed MySQL and find the bin folder.
** In Linux or UNIX, you may type commands at the shell prompt in a terminal window.
* To connect to a database using this client, you will enter information similar to the following lines:
<br /><pre>
mysql --user=root --password=my_password --host=localhost
</pre>
or
<br /><pre>
mysql -u root -p my_password -h localhost
</pre>
* Once you are successfully connected, you will get the mysql> prompt instead of your standard DOS/UNIX prompt. This means you are now sending commands to the MySQL database server and not to your local computer's operating system.
* There are many command-line options for the MySQL client. The most common are shown in this table.
* Table: MySQL Command-Line Options

table{text-align:left; margin-left: 4em;}.
|{background:#ccc}.*Short*<br />*Format*|{background:#ccc}.*Long_Format*|{background:#ccc}.*Description*|
|@-?@      |@--help             @  |Display this help and exit.                                                                                                          |
|@-I@      |@--help             @  |Synonym for -?.                                                                                                                      |
|@-B@      |@--batch            @  |Do not use history file. Disable interactive behavior. (Enables --silent.)                                                           |
|@-C@      |@--compress         @  |Use compression in server/client protocol.                                                                                           |
|@-#@      |@--debug[=#]        @  |This is a nondebug version. Catch this and exit.                                                                                     |
|@-D@      |@--database=name    @<br />@--delimiter=name   @  |Database to be used.<br />Delimiter to be used.                                                                                                                 |
|@-e@      |@--execute=name     @  |Execute command and quit. (Disables --force and history file.)                                                                       |
|@-E@      |@--vertical         @  |Print the output of a query (rows) vertically.                                                                                       |
|@-f@      |@--force            @  |Continue even if we get an sql error.                                                                                                |
|@-i@      |@--ignore-spaces    @<br />@--local-infile     @  |Ignore space after function names.<br />Enable or disable LOAD DATA LOCAL INFILE.                                                                                                   |
|@-b@      |@--no-beep          @  |Turn off beep on error.                                                                                                              |
|@-h@      |@--host=name        @  |Connect to host.                                                                                                                     |
|@-H@      |@--html             @  |Produce HTML output.                                                                                                                 |
|@-X@      |@--xml              @<br />@--line-numbers     @  |Produce XML output<br />Write line numbers for errors.                                                                                                                   |
|@-L@      |@--skip-line-numbers@<br />@--no-tee@  |Do not write line number for errors. WARNING: -L is deprecated, so use long version of this option instead.<br />Disable outfile. See interactive help (\h) also.<br />WARNING: Option deprecated; use --disable-tee instead.|
|@-n@      |@--unbuffered       @<br />@--column-names     @  |Flush buffer after each query. <br />Write column names in results.|
|@-N@      |@--skip-column-names@  |Do not write column names in results.<br />WARNING: -N is deprecated, use long version of this option instead|
|@-o@      |@--one-database     @  |Only update the default database. This is useful for skipping updates to other databases in the update log.                          |
|@-p@      |@--password[=name]  @  |Password to use when connecting to server. If password is not given, it is asked from the tty.                                       |
|@-W@      |@--pipe             @  |Use named pipes to connect to server.                                                                                                |
|@-P@      |@--port=#           @<br />@--prompt=name      @  |Port number to use for connection.<br />Set the mysql prompt to this value.|
|@-q@      |@--quick            @  |Do not cache result, print it row by row. This might slow down the server if the output is suspended. Does not use history file.     |
|@-r@      |@--raw              @<br />@--reconnect        @  |Write fields without conversion. Used with --batch.<br />Reconnect if the connection is lost. Disable with --disable-reconnect. This option is enabled by default.|
|@-s@      |@--silent           @  |Be more silent. Print results with a tab as separator, each row on a new line.                                                       |
|@-t@      |@--table            @  |Output in table format.                                                                                                              |
|@-T@      |@--debug-info<br />@--tee=name       @  |Print some debug info at exit.<br />Append everything into outfile. See interactive help (\h) also. Does not work in batch mode.|
|@-u@      |@--user=name        @  |User for login if not current user.                                                                                                  |
|@-U@      |@--safe-updates     @  |Only allow UPDATE and DELETE that uses keys.                                                                                         |
|@-U@      |@--i-am-a-dummy     @  |Synonym for option --safe-updates.                                                                                                   |
|@-v@      |@--verbose          @  |Write more (-v -v -v gives the table output format).                                                                                 |
|@-V@      |@--version          @  |Output version information and exit.                                                                                                 |

h3. Graphical User Tools

h4. The *phpMyAdmin* Tool

* The *phpMyAdmin* tool is written in PHP to handle the administration of MySQL servers over the Web.
* It is used to create and drop databases, manipulate tables and fields, execute SQL statements, manage keys on fields, manage privileges, and export data into various formats.
* Your instructor will demonstrate using *phpMyAdmin* to connect to MySQL on the class server. *phpMyAdmin* is maintained by an open source project. For more information see: http://www.phpmyadmin.net/home_page/index.php

h4. The MySQL Query Browser

* The MySQL Query Browser is a graphical user interface (GUI) client available from MySQL AB used to connect to the MySQL database server.
* Versions are available for Windows and Linux. You may download it from mysql.com .
* On startup, the MySQL Query Browser displays a connection dialog box. You must specify the MySQL server where you want to connect, the credentials needed for authorization on that server, which machine that server runs on (plus which port it listens to), and the default database (called the "Schema") you will be using.
* You must choose a default database to issue queries against. Although it is possible to choose a default database after connecting to the server, setting the default from the connection dialog box can save time on subsequent connections.
* The information to enter is very similar to the command-line client: username, password, and the server host where the database server is running.
* You can optionally enter the database name and port number (3306 is the default for MySQL) and save the connection information as a bookmark under the Stored Connection section.
* Your instructor will demonstrate connecting to MySQL using the MySQL Query Browser.
* By using the familiar tree-like navigation structure on the right side of the application window, you can also navigate through the various databases in the MySQL Query Browser.

<br />

<hr />

[[Unit Eleven => 152-166 Unit Eleven Index]]
