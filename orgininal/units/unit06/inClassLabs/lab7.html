<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

  <meta name="generator" content="HTML Tidy, see www.w3.org" />

  <title>In-class Lab 7</title>
  <link href="../../../css/basic.css" rel="stylesheet" type="text/css" />

  <script type="text/javascript" language="JavaScript">

<!--

function putSemester() {

    var today=new Date();

    var thisMonth=today.getMonth()+1;

    var thisYear=today.getFullYear();

    if(thisMonth <=6) {

        return "Spring, " + thisYear;

    }

    else {

       return "Fall, " + thisYear;

    }

}//-->

  </script>
  
  
  <style type="text/css">

<!--

    .bgStripes {

        background-image:url(../../../images/Xstripes.gif);

        background-attachment: fixed;

    }

    body {

        background-color:white;

    }

    strong {

        font-family: Arial, Helvetica, sans-serif;

    }

-->

  </style>
</head>

<body style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">

<table class="bgStripes" border="0" width="100%">

  <tbody>

    <tr name="firstRow">

      <td valign="top" width="80"><span style="font-size: x-small; font-weight: bold;">
      
      <script type="text/javascript">

          <!--

            document.write(putSemester());

            -->

      </script>
      </span> <br />

      </td>

<td style="text-align: center;"><span style="color: darkblue; font-size: medium; font-weight: bold;">
PHP Web Development with MySQL</span> </td>
<td align="right" valign="top" width="80"><span style="font-size: x-small; font-weight: bold;">
3 Credits</span> </td>
</tr>
<tr>
<td colspan="3" style="text-align: center;"><span style="font-size: xx-small; font-weight: bold;">
152-166</span> </td>
</tr>
</tbody>
</table>
<h2>In-class Lab 7</h2>
<ol type="I">
<li class="row0">
<p>
Exercise 1 - Write functions to format input strings for display and storage
</p>
<ol type="1">
<li class="row1">
<p>
First build a function named <code>format_for_db()</code> that accepts a
string as input and adds "\" characters to it as needed to escape
special characters used by MySQL and other databases.
</p>
</li>
<li class="row1">
<p>
Step 1 in building <code>format_for_db()</code> is to test whether the
<code>magic_quotes_gpc</code> directive is on, using a PHP built-in function.
</p>
</li>
<li class="row1">
<p>
If "magic quotes" is on, your <code>format_for_db()</code> function does not
need to modify the string, because PHP will have already done so automatically!
But, if "magic quotes" is off, your function must call the PHP built-in function
<code>addslashes()</code> to add "\" characters.
</p>
</li>
<li class="row0">
<p>
Finally your function must return the (possibly modified) string to the caller.
</p>
</li>
<li class="row1">
<p>
Now build a function named <code>format_for_display()</code> that accepts a
string as input and removes "\" characters if needed so you can display
it with <code>echo</code> or <code>print</code> and not have extra backslashes
in the output.
</p>
</li>
<li class="row1">
<p>
Step 1 in building <code>format_for_display()</code> is (again) to test whether the
<code>magic_quotes_gpc</code> directive is on, using a PHP built-in function.
</p>
</li>
<li class="row1">
<p>
If "magic quotes" is on, your <code>format_for_display()</code> function must
call the PHP built-in function <code>stripslashes()</code> to remove "\" characters.
But, if "magic quotes" is off, your function does not need to modify the string.
PHP has not modified it automatically, so it is exactly as the user input it.
</p>
</li>
<li class="row0">
<p>
Finally the <code>format_for_display()</code> function returns the
(possibly modified) string to the caller.
</p>
</li>
<li class="row0">
<p>
Save your two functions to a file named <b>lab7ex1.inc.php</b> in your <b>labs</b>
directory. You will test the functions in Exercise 2.
</p>
</li>
</ol>
</li>
<li class="row0">
<p>
Exercise 2 - Test your functions with user input.
</p>
<ol type="1">
<li class="row1">
<p>
Download the files <a href="lab7form.html.txt">lab7form.html</a> and
<a href="lab7ex2.php.txt">lab7ex2.php</a> from the Blackboard version of
this lab to your <b>labs</b> directory.
<p>
</li>
<li class="row1">
<p>
Add a line to <b>lab7ex2.php</b> to <code>require()</code> the file containing 
your two functions (lab7ex1.inc.php).
</p>
</li>
<li class="row0">
<p>
Then, add code to <b>lab7ex2.php</b> so that for the name, address and email
address obtained from the user on <b>lab7form</b> it displays the contents
of the variables in three (3) ways:
</p>
<ul>
<li>
"As is" - it already does this (try it).</li>
<li>
After being processed by your <code>format_for_db()</code> function.</li>
<li>
After being processed by your <code>format_for_display()</code> function.</li>
</ul>
</li>
<li class="row0">
<p>
Try the modified <b>lab7ex2.php</b> script with the name: Shaun O'Brien<br>
Also, try addresses containing characters such as double quotes, single
quotes, backslashes, dashes and semi-colons.
</p>
</li>
<li class="row0">
<p>
Show your instructor the modified <b>lab7ex2.php</b> script and the
<b>lab7ex1.inc.php</b> include file containing your functions.
</p>
</li>
<li class="row0">
<p>
Which of your two functions actually modified the input strings?
Why?<br><br>
</p>
<p><hr width="75%" /></p>
</li>
</ol>
</li>
</ol>
</body>
</html>
