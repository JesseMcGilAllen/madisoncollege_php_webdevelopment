<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta name="generator" content="HTML Tidy, see www.w3.org" />
  <title>In-class Lab 9.2</title>
  <link href="../../../css/basic.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" language="JavaScript">
<!--
function putSemester() {
    var today=new Date();
    var thisMonth=today.getMonth()+1;
    var thisYear=today.getFullYear();
    if(thisMonth <=6) {
        return "Spring, " + thisYear;
    }
    else {
       return "Fall, " + thisYear;
    }
}//-->
  </script>
  <style type="text/css">
<!--
    .bgStripes {
        background-image:url(../../../images/Xstripes.gif);
        background-attachment: fixed;
    }
    body {
        background-color:white;
    }
    strong {
        font-family: Arial, Helvetica, sans-serif;
    }
-->
  </style>
</head>
<body style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<table class="bgStripes" border="0" width="100%">
  <tbody>
    <tr name="firstRow">
      <td valign="top" width="80"><span style="font-size: x-small; font-weight: bold;">
      <script type="text/javascript">
          <!--
            document.write(putSemester());
            -->
      </script>
      </span> <br />
</td>
<td style="text-align: center;"><span style="color: darkblue; font-size: medium; font-weight: bold;">
PHP Web Development with MySQL</span> </td>
<td align="right" valign="top" width="80"><span style="font-size: x-small; font-weight: bold;">
3 Credits</span> </td>
</tr>
<tr>
<td colspan="3" style="text-align: center;"><span style="font-size: xx-small; font-weight: bold;">
152-166</span> </td>
</tr>
</tbody>
</table>
<h2>In-class Lab 9.2</h2>
<ol type="I">
<li class="row0">
<p>Exercise 1</p>
<ol type="1">
<li class="row0">
<p>
If using your Linux VM, create directory <b>lab09</b> under your
<b>/var/www/labs</b> directory, if it does not exist.
Otherwise create directory <b>lab09</b> under the document root of whatever web server you are using.
If using XAMPP on the MATC Windows lab computers that will be: <b>C:\xampp\htdocs</b>
If using XAMPP on your external USB drive it will probably be: <b>E:\xampp\htdocs</b>
</p>
</li>
<li class="row1">
<p>
In <b>jEdit</b> or another text editor, create a PHP script file named
<b>lab9x2e1.php</b> In the script, create 4 variables to hold a name, street
address, city and 2 character state abbreviation. Assign appropriate values to
each variable.
</p>
</li>
<li class="row0">
<p>
Create a variable named <b>$outputString</b> and assign to it the concatenated list of
the other 4 variables. Each of the 4 variables should be enclosed in double
quotes and separated by commas. Put a newline character at the end of the string.
Your assignment statement will be similar to this:
</p>
<blockquote><code><small>
$outputString = '"$name","$address","$city","$state"'."\n";
</small></code></blockquote>
</li>
<li class="row1">
<p>
Open a file named "mydata.txt" with <b>fopen()</b> in a directory that the web
user can write to. Open the file to append data to the end of it, and suppress
any PHP errors generated by the fopen() function.
</p></li>
<li class="row0">
<p>
After opening the file, you must check to make sure a nonempty file pointer was
returned. If not, give an appropriate error message and exit.
</p>
</li>
<li class="row1">
<p>
Otherwise, write $outputString to the file using the <b>fwrite()</b> function, and
print an appropriate message such as: "$outputString written to file $filename".
</p>
</li>
<li class="row0">
<p>
Remember to close the file explicitly before exiting. Test your code to verify
that it writes to the file successfully.
</p>
</li>
</ol>
<p><hr width="50%" /></p>
<li class="row1">
<p>Exercise 2</p>
<ol type="1">
<li class="row1">
<p>Make a copy of your script from Exercise 1 in a file named <b>lab9x2e2.php</b>
and save it into your lab09 directory.
</p>
</li>
<li class="row1"><p>
Change the name and address information so you will be able to distinguish this
data record from the one written by your Exercise 1 script.
</p>
</li>
<li class="row1">
<p>
Add code to lock the file immediately before writing to it, and then unlock it
immediately afterwards.
</p>
</li>
<li class="row1">
<p>
Test your code to be sure it still writes to the file with your changes.
</p></li>
</ol>
<p><hr width="50%" /></p>
<li class="row1">
<p>Exercise 3</p>
<ol type="1">
<li class="row1">
<p>
Make a copy of your script from Exercise 2 in a file named <b>lab9x2e3.php</b>
and save it into your lab09 directory.
</p>
</li>
<li class="row1"><p>
Again, change the name and address information so you will be able to distinguish
this data record from the ones written by your Exercise 1 and 2 scripts.
</p>
</li>
<li class="row1">
<p>
Add code to read the contents of the mydata.txt file using the <b>file_get_contents()</b>
function after you write a data record to it.
</p></li>
<li class="row1">
<p>
Display the contents of the file enclosed in "&lt;pre&gt;" tags so each record
will be displayed on a separate line.
</p></li>
<li class="row1">
<p>Test your code and show it to your instructor.</p>
</li>
</ol>
<p><hr width="75%" /></p>
</li>
</ol>
</body>
</html>
